{% extends "main.html" %}

{% block css %}
    {{ block.super }}
    <link href="{{ STATIC_URL }}css/list.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}css/devices_list.css" rel="stylesheet">
{% endblock %}

{% block sub_content%}
    {% if devices_list %}
    <h1>Список трэкеров</h1>
    <table class="table table-striped table-condensed vertical-middle">
    <thead>
    <tr>
        <th>ID</th>
        <th>Название</th>
        <th>Количество точек</th>
        <th>Статус</th>
        <th>Изображение</th>
        <th>Операции</th>
    </thead>
    <tbody>
    {% for device in devices_list %}
        <tr>
            <td>{{ device.get_device_id }}</td>
            <td>{{ device.title }}</td>
            <td class="positions"><a href="{% url 'positions_list' device.id %}" class="btn btn-sm" title="Список путевых точек"><i class="icon-list"></i> {{ device.get_device_positions_count }}</a></td>
            <td class="status">{% if device.connection_address == None %}Offline{% else %}Online{% endif %}</td>
            <td class="marker"><div class="marker_container"><div class="line" style="height:{{ device.width }}px; background-color: {{ device.get_color }}"></div><img src="{{ device.get_image }}" width="30px"></div></td>
            <td><a href="{% url 'edit_device' device.id %}" class="btn btn-sm" title="Редактировать трэкер">Редактировать</a>
                <a href="{% url 'delete_device' device.id %}" class="btn btn-danger btn-sm" title="Удалить трэкер">Удалить</a></td>
        </tr>
    {% endfor %}
    </tbody>
    </table>

    {% if is_paginated %}
    <div class="pagination">
        <a {% if not page_obj.has_previous %}class="disabled"{% endif %} href="{% if page_obj.has_previous %}?page={{ page_obj.previous_page_number }}{% else %}javascript:void(0);{% endif %}">&larr; Назад</a>
        <a {% if not page_obj.has_next %}class="disabled"{% endif %} href="{% if page_obj.has_next %}?page={{ page_obj.next_page_number }}{% else %}javascript:void(0);{% endif %}">Вперед &rarr;</a>
        <span class="page-current pull-right">Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</span>
    </div>

    {% endif %}
{% else %}
    <h1>Зарегистрируйте GPS трэкер</h1>
{% endif %}
{% endblock %}