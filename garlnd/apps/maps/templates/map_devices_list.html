{% extends 'main.html' %}
{% load django_bootstrap5 %}

{% block sub_content %}

    {% if with_form %}
    <h1>Добавление трэкера на карту &laquo;{{ map_to_adding.title }}&raquo;</h1>
    <hr>
    <form class="form-horizontal" action="" method="post">{% csrf_token %}
        {% bootstrap_form form layout='horizontal' %}
        <div class="control-group">
            <div class="controls">
                <input type="submit" value="Добавить" class="btn btn-primary">
            </div>
        </div>
    </form>
    {% endif %}

    {% if devices_list %}
        <h1>Список трэкеров {% if not with_form %}на карте &laquo;{{ map_to_adding.title }}&raquo;{% endif %}</h1>
        <table class="table table-striped table-condensed vertical-middle">
        <thead>
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Количество точек</th>
            <th>Статус</th>
            <th>Операции</th>
        </thead>
        <tbody>
        {% for device in devices_list %}
            <tr>
                <td>{{ device.get_device_id }}</td>
                <td>{{ device }}</td>
                <td>{{ device.get_device_positions_count }}</td>
                <td>{% if device.connection_address == None %}Offline{% else %}Online{% endif %}</td>
                <td><a href="{% url 'map_device_delete' map_to_adding.id device.id %}" class="btn btn-danger btn-sm" title="Удалить трэкер с карты">Удалить с карты</a></td>
            </tr>
        {% endfor %}
        </tbody>
        </table>
    {% endif %}
{% endblock %}