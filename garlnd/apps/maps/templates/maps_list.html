{% extends "main.html" %}

{% block css %}
    {{ block.super }}
    <link href="{{ STATIC_URL }}css/list.css" rel="stylesheet">
{% endblock %}

{% block sub_content%}
    {% if maps_list %}
    <h1>Список карт</h1>
    <table class="table table-striped table-condensed vertical-middle">
    <thead>
    <tr>
        <th>Название</th>
        <th>Ссылка</th>
        <th class="text-center">Трэкеров</th>
{#        <th class="text-center">Пощадок</th>#}
        <th class="text-center">Операции</th>
    </thead>
    <tbody>
    {% for map in maps_list %}
        <tr>
            <td><a title="Открыть карту" href="{% url 'map' map.id %}">{{ map.title }}</a></td>
            <td><a title="Открыть карту" href="{% url 'map' map.id %}">http://{{ request.get_host }}{% url 'map' map.id %}{% if not map.is_opened %}?password={{ map.view_password }}{% endif %}</a></td>
            <td class="text-center"><a href="{% url 'map_devices_list' map.id %}" class="btn btn-sm btn-outline-secondary" title="Список трэкеров на карте"><i class="icon-list"></i> {{ map.get_devices_count }}</a></td>
{#            <td class="text-center"><a href="{% url 'map_locations_list' map.id %}" class="btn btn-sm btn-outline-secondary" title="Список площадок на карте"><i class="icon-list"></i> {{ map.get_locations_count }}</a></td>#}
            <td class="text-center"><a href="{% url 'map_edit' map.id %}" class="btn btn-sm btn-outline-secondary" title="Редактировать карту">Редактировать</a>
                <a href="{% url 'map_delete' map.id %}" class="btn btn-danger btn-sm btn-outline" title="Удалить карту">Удалить</a></td>
        </tr>
    {% endfor %}
    </tbody>
    </table>

    {% if is_paginated %}
    <div class="pagination">
        <a {% if not page_obj.has_previous %}class="disabled"{% endif %} href="{% if page_obj.has_previous %}?page={{ page_obj.previous_page_number }}{% else %}javascript:void(0);{% endif %}">&larr; Назад</a>
        <a {% if not page_obj.has_next %}class="disabled"{% endif %} href="{% if page_obj.has_next %}?page={{ page_obj.next_page_number }}{% else %}javascript:void(0);{% endif %}">Вперед &rarr;</a>
        <span class="page-current pull-right">Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</span>
    </div>

    {% endif %}
{% else %}
    <h1>Для начала работы создайте карту :)</h1>
{% endif %}
{% endblock %}